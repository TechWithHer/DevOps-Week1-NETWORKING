
---

# âœ… Real-World Network Troubleshooting Case Study using OSI & TCP/IP Layers

---

## ğŸ¢ Use Case: Fixing Website Connectivity Issues for `ayushisingh.com`

---

### ğŸ¯ Situation

**Client:** Ayushisingh.com is a portfolio website.
**Problem:** Users reported **intermittent website loading failures** and **slow response times**.
**Your Role:** Troubleshoot and resolve the issue layer-by-layer using OSI and TCP/IP models.

---

## ğŸ§  Troubleshooting Steps (With Real Commands)

---

### ğŸ”Œ Layer 1 â€” Physical (TCP/IP: Link Layer)

**Question:** Are the network interfaces physically connected and up?

âœ… **Command**:

```bash
ip link show
```

âœ… **Expected Output**:

```
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 ...
```

* `UP` and `LOWER_UP` means cable or Wi-Fi is physically working.
* If `DOWN`, check cable or virtual adapter settings.

âœ… **Action Taken**: Confirmed all physical interfaces were **UP and running** â€” no cable or NIC failure.

---

### ğŸ“¡ Layer 2 â€” Data Link (MAC, ARP)

**Question:** Is the local LAN working? Are devices discoverable?

âœ… **Command**:

```bash
arp -a
```

âœ… **Expected Output**:

```
? (192.168.68.1) at 9c:53:22:66:c3:48 on en0 [ethernet]
```

âœ… **Ping if entry is missing**:

```bash
ping 192.168.68.1
```

âœ… **Action Taken**: Checked ARP table, verified MAC entries for the router and devices. No spoofing or errors found.

---

### ğŸŒ Layer 3 â€” Network (IP, Routing, Packet Flow)

**Question:** Is IP routing stable? Any packet loss?

âœ… **Step 1: Check assigned IP**

```bash
ip a
```

âœ… **Step 2: Ping gateway**

```bash
ip route
ping -c 3 <gateway_ip>
```

âœ… **Step 3: Ping external IP (Google DNS)**

```bash
ping -c 3 8.8.8.8
```

âœ… **Step 4: Trace the route**

```bash
traceroute fastshop.com
```

âœ… **Action Taken**:

* Gateway ping worked âœ…
* `ping 8.8.8.8` showed intermittent loss âŒ
* `traceroute` showed high latency at one ISP hop âŒ

ğŸ§  **Diagnosis**: IP-level (Layer 3) issue with upstream ISP routing.

---

### ğŸšª Layer 4 â€” Transport (TCP/UDP Connectivity)

**Question:** Are necessary ports open? Are connections stable?

âœ… **Check TCP ports (80 and 443)**:

```bash
nc -zv fastshop.com 80
nc -zv fastshop.com 443
```

âœ… **Check DNS with UDP (port 53)**:

```bash
dig google.com
```

*or:*

```bash
nslookup google.com
```

âœ… **Action Taken**:

* Port 80 worked âœ…
* Port 443 failed sometimes âŒ
* DNS resolution was fine âœ…

ğŸ§  **Diagnosis**: Firewall or proxy issue blocking some TCP/443 traffic.

---

### ğŸŒ Layers 5-7 â€” Session, Presentation, Application

**Question:** Are secure connections and HTTP sessions working?

âœ… **Check active TCP sessions**:

```bash
ss -t -a     # Linux
netstat -at  # macOS
```

âœ… **SSL handshake check**:

```bash
openssl s_client -connect fastshop.com:443
```

âœ… **Test HTTP response**:

```bash
curl -I https://fastshop.com
```

âœ… **Action Taken**:

* SSL handshake timed out randomly âŒ
* `curl` gave inconsistent `200 OK` âŒ
* TCP sessions kept dropping âŒ

ğŸ§  **Diagnosis**:

* Unstable SSL termination (Layer 6 issue)
* Affected app-level HTTP responses (Layer 7)

---

## ğŸ§© Root Cause Summary

| OSI Layer | Problem Identified                          |
| --------- | ------------------------------------------- |
| Layer 3   | Packet loss due to ISP latency              |
| Layer 4   | Port 443 blocked intermittently by firewall |
| Layer 6   | SSL handshakes failing                      |
| Layer 7   | HTTP responses timing out                   |

---

## ğŸ› ï¸ Resolution Steps

1. Collaborated with ISP â†’ **Fixed packet loss** on route.
2. Updated firewall rules â†’ **Allowed all TCP/443 connections**.
3. Restarted **SSL termination proxy** (e.g., Nginx or HAProxy).
4. Monitored using `curl`, `openssl`, `ping`, and `ss`.

---

## ğŸ“ˆ Final Outcome

* Site fully stabilized âœ…
* SSL and HTTP requests working consistently âœ…
* No more packet loss âœ…
* Client praised the **structured, layered diagnosis** âœ…

---

## ğŸ§  Quick Reference: TCP/IP Troubleshooting Summary

| TCP/IP Layer            | Tools / Fixes                        |
| ----------------------- | ------------------------------------ |
| **Link (Layer 1â€“2)**    | `ip link`, `arp`, `ping`             |
| **Internet (Layer 3)**  | `ip a`, `traceroute`, `ping 8.8.8.8` |
| **Transport (Layer 4)** | `nc`, `ss`, firewall ports           |
| **Application (L5â€“7)**  | `curl`, `openssl`, `netstat`, logs   |

---
